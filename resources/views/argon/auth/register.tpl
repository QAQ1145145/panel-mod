<html>
  
  <head></head>
  
  <body>
    <!DOCTYPE html>
    <html lang="zh">
      
      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="theme-color" content="#2d79fb">
        <meta name="author" content="Webpixels">
        <title>{$config["appName"]}</title>
        <link rel="stylesheet" href="/theme/asky/fonts.css">
        <link rel="stylesheet" href="/theme/asky/css/all.min.css">
        <link rel="stylesheet" href="/theme/asky/css/theme.css"></head>
      
      <body class="bg-primary">
        <header class="header-transparent" id="header-main">
          <div id="search-main" class="navbar-search">
            <div class="container">
              <div class="navbar-search-suggestions">
                <h6>Search Suggestions</h6>
                <div class="row">
                  <div class="col-sm-6">
                    <ul class="list-unstyled mb-0">
                      <li>
                        <a class="list-link" href="register#">
                          <i class="far fa-search"></i>
                          <span>macbook pro</span>in Laptops</a></li>
                      <li>
                        <a class="list-link" href="register#">
                          <i class="far fa-search"></i>
                          <span>iphone 8</span>in Smartphones</a></li>
                      <li>
                        <a class="list-link" href="register#">
                          <i class="far fa-search"></i>
                          <span>macbook pro</span>in Laptops</a></li>
                      <li>
                        <a class="list-link" href="register#">
                          <i class="far fa-search"></i>
                          <span>beats pro solo 3</span>in Headphones</a></li>
                      <li>
                        <a class="list-link" href="register#">
                          <i class="far fa-search"></i>
                          <span>smasung galaxy 10</span>in Phones</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <nav class="navbar navbar-main navbar-expand-lg navbar-sticky navbar-transparent navbar-dark bg-dark" id="navbar-main">
            <div class="container">
              <a class="navbar-brand mr-lg-5"></a>
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-main-collapse" aria-controls="navbar-main-collapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbar-main-collapse">
                <ul class="navbar-nav align-items-lg-center">
                  <li class="nav-item ">
                    <a class="nav-link" href="../">主页</a></li>
                  <li class="nav-item dropdown dropdown-animate" data-toggle="hover">
                    <a class="nav-link" href="register#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">介绍</a>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-arrow py-0">
                      <div class="list-group">
                        <a href="https://wiki.ddjiasu.me" class="list-group-item list-group-item-action">
                          <div class="media d-flex align-items-center">
                            <div class="media-body ml-3">
                              <h6 class="mb-1">帮助文档</h6></div>
                          </div>
                        </a>
                        <a href="../staff" class="list-group-item list-group-item-action">
                          <div class="media d-flex align-items-center">
                            <div class="media-body ml-3">
                              <h6 class="mb-1">STAFF</h6></div>
                          </div>
                        </a>
                      </div>
                    </div>
                  </li>
                  <li class="nav-item dropdown dropdown-animate" data-toggle="hover">
                    <a class="nav-link" href="register#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">服务政策</a>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-arrow py-0">
                      <div class="list-group">
                        <a href="../legal" class="list-group-item list-group-item-action">
                          <div class="media d-flex align-items-center">
                            <div class="media-body ml-3">
                              <h6 class="mb-1">总则</h6></div>
                          </div>
                        </a>
                        <a href="../legal/tos" class="list-group-item list-group-item-action">
                          <div class="media d-flex align-items-center">
                            <div class="media-body ml-3">
                              <h6 class="mb-1">服务条款</h6></div>
                          </div>
                        </a>
                        <a href="../legal/privacy" class="list-group-item list-group-item-action">
                          <div class="media d-flex align-items-center">
                            <div class="media-body ml-3">
                              <h6 class="mb-1">隐私条款</h6></div>
                          </div>
                        </a>
                        <a href="../legal/aup" class="list-group-item list-group-item-action">
                          <div class="media d-flex align-items-center">
                            <div class="media-body ml-3">
                              <h6 class="mb-1">可使用政策</h6></div>
                          </div>
                        </a>
                      </div>
                    </div>
                  </li>
                  <li class="nav-item dropdown dropdown-animate" data-toggle="hover">
                    <a class="nav-link" href="register#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">用户中心</a>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-arrow py-0">
                      <div class="list-group">
                        <a href="../user/download" class="list-group-item list-group-item-action">
                          <div class="media d-flex align-items-center">
                            <div class="media-body ml-3">
                              <h6 class="mb-1">登录</h6></div>
                          </div>
                        </a>
                        <a href="register" class="list-group-item list-group-item-action">
                          <div class="media d-flex align-items-center">
                            <div class="media-body ml-3">
                              <h6 class="mb-1">注册</h6></div>
                          </div>
                        </a>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
        </header>
        <main>
          <div class="container pt-lg">
            <div class="row justify-content-center">
              <div class="col-md-8 col-lg-6">
                <div class="card shadow zindex-100">
                  <div class="card-body px-md-5 py-5">
                    <div class="text-center mb-5">
                      <h6 class="h3">创建一个账户</h6>
                      <p class="text-muted mb-0">若提示系统无法接受您的验证结果, 请按照提示刷新界面</p></div>
                    <span class="clearfix"></span>
                    <div class="form-group">
                      <label class="form-control-label">昵称</label>
                      <div class="input-group input-group-transparent">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <i class="far fa-user"></i>
                          </span>
                        </div>
                        <input id="name" type="text" class="form-control" /></div>
                    </div>
                    <div class="form-group">
                      <label class="form-control-label">邮箱地址</label>
                      <p>
                        <font size="-1" color="red">重要: 邮箱将是我们通知重大更新和消息的唯一方式, 请确保您填写的邮箱是您的个人主要邮箱</font></p>
                      <div class="input-group mb-3">
                        <input id="email" type="email" maxlength="32" class="form-control" aria-describedby="basic-addon2" /></div>
                    </div>
                    <div class="form-group mb-4">
                      <label class="form-control-label">邮箱验证码</label>
                      <p>
                        <font size="-1" color="red">提示: 若长时间没收到请查看您的垃圾箱</font></p>
                      <div class="input-group input-group-transparent">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <i class="far fa-key"></i>
                          </span>
                        </div>
                        <input class="form-control" id="email_code" type="text" onkeypress="javascript:if(event.keyCode == 32)event.returnValue = false;" />
                        <div class="input-group-append">
                          <button class="btn btn-primary" id="email_verify" type="button">获取验证码</button></div>
                      </div>
                    </div>
                    <div class="form-group mb-4">
                      <label class="form-control-label">密码</label>
                      <div class="input-group input-group-transparent">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <i class="far fa-key"></i>
                          </span>
                        </div>
                        <input type="password" class="form-control" id="passwd" /></div>
                    </div>
                    <div class="form-group">
                      <label class="form-control-label">重复密码</label>
                      <div class="input-group input-group-transparent">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <i class="far fa-key"></i>
                          </span>
                        </div>
                        <input type="password" class="form-control" id="repasswd" /></div>
                    </div>
                    <div class="form-group md-4">
                      <label class="form-control-label">联系方式</label>
                      <div class="input-group mb-3">
                        <input type="text" id="wechat" class="form-control" aria-describedby="basic-addon2" />
                        <div class="input-group-append">
                          <label class="floating-label" for="imtype"></label>
                          <select class="form-control" id="imtype">
                            <option disabled="" selected="selected">选择您的联系方式</option>
                            <option value="1">微信</option>
                            <option value="2">QQ</option>
                            <option value="3">Google+</option>
                            <option value="4">Telegram</option></select>
                        </div>
                      </div>
                    </div>

                    <div class="form-group mb-4">
                      <label class="form-control-label">邀请码</label>
                      <div class="input-group input-group-transparent">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <i class="far fa-key"></i>
                          </span>
                        </div>
                        <input type="text" class="form-control" id="code" placeholder="若没有,请输入 welcome "/></div>
                    </div>
                    <!--<div class="custom-control custom-checkbox mb-3">
                    <input type="checkbox" class="custom-control-input" id="thememod" name="thememod">
                    <label class="custom-control-label" for="thememod">I’m foreign, request for English version</label></div>-->
                    <div class="my-4">
                      <div class="custom-control custom-checkbox">
                        <input class="custom-control-input" id="legal" type="checkbox" />
                        <label class="custom-control-label" for="legal">
                          <span>注册即代表同意
                            <a href="../tos">《服务条款》</a></span>
                        </label>
                      </div>
                    </div>
                    <div class="row align-items-center">
                      <div class="col-sm-7">
                        <button id="tos" type="submit" disabled="" class="btn btn-primary mb-3 mb-sm-0">注册</button></div>
                      <div class="col-sm-5 text-sm-right">
                        <span class="small d-sm-block d-md-inline">诶?我注册了哇</span>
                        <a href="../user" class="small font-weight-bold">点我去登陆</a></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </main>
        <div class="modal modal-fluid fade" id="tos_modal" tabindex="-1" role="dialog" aria-labelledby="modal_1" aria-hidden="true">
          <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-body">
                <div class="row justify-content-center">
                  <div class="col-lg-8 text-center py-4">
                    <h4 class="heading h3">注册 Term of Services</h4>
                    <p class="lead text-muted">
                      <ul>
                        <li>请提供真实邮箱，并自行保管。邮箱为用户的唯一凭证。</li>
                        <li>本站会加密存储用户密码，尽量保证数据安全，但并不保证这些信息的绝对安全。</li>
                        <li>禁止使用本站服务进行任何违法恶意活动。</li>
                        <li>使用任何节点，需遵循节点所属国家的相关法律以及中国法律。</li>
                        <li>禁止滥用本站提供的服务。</li>
                        <li>对于免费用户，我们有权在不通知的情况下删除账户。</li>
                        <li>任何违反使用条款的用户，我们将会删除违规账户并收回使用本站服务的权利。</li></ul>
                    </p>
                    <div class="modal-footer">
                      <p style="width: 100%;height: 45px;display: block;line-height: 45px;text-align: center;">
                        <button class="btn btn-primary" data-dismiss="modal" type="button" id="cancel">我不同意</button>
                        <button class="btn btn-primary" data-dismiss="modal" id="reg" type="button">我同意</button></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal modal-fluid fade" id="result" tabindex="-1" role="dialog" aria-labelledby="result" aria-hidden="true">
          <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-body">
                <div class="row justify-content-center">
                  <div class="col-lg-8 text-center py-4">
                    <p class="lead text-muted" id="msg"></p>
                    <button type="button" class="btn btn-primary" data-dismiss="modal">我知道了</button></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
        <script src="/theme/asky/js/jquery.boa.js"></script>
        <script src="/theme/asky/js/bootstrap.bundle.min.js"></script>
        <script src="/theme/asky/js/in-view.min.js"></script>
        <script src="/theme/asky/js/typed.min.js"></script>
        <script src="/theme/asky/js/theme.js"></script>
      </body>
    
    </html>
    <script>$("#legal").click(function() {
        if ($('#legal').is(':checked')) {
          $("#tos").removeAttr("disabled")
        } else {
          $('#tos').attr("disabled", true);
        }
      });</script>
    <script>$(document).ready(function() {
        function register() {
          code = $("#code").val();
          /*code = 0;*/
          if ((getCookie('code')) != '') {
            code = getCookie('code');
          }
          document.getElementById("tos").disabled = true;

          if ($('#thememod').is(':checked')) {
            var thememod = 1
          } else {
            var thememod = 0
          }
          
          $.ajax({
            type: "POST",
            url: "/auth/register",
            dataType: "json",
            data: {
              email: $("#email").val(),
              name: $("#name").val(),
              passwd: $("#passwd").val(),
              repasswd: $("#repasswd").val(),
              thememod: thememod,
              wechat: $("#wechat").val(),
              imtype: $("#imtype").val(),
              code: code,
              emailcode: $("#email_code").val()
            },
            success: function(data) {
              if (data.ret == 1) {
                $("#result").modal();
                $("#msg").html(data.msg);
                setCookie('code', '', 0);
                window.setTimeout("location.href='/auth/login'", 1200);
              } else {
                $("#result").modal();
                $("#msg").html(data.msg);

                $("#code").val(getCookie('code'));
                document.getElementById("tos").disabled = false;
              }
            },
            error: function(jqXHR) {
              $("#msg-error").hide(10);
              $("#msg-error").show(100);
              $("#msg-error-p").html("发生错误：" + jqXHR.status);
              document.getElementById("tos").disabled = false;
            }
          });
        }
        $("html").keydown(function(event) {
          if (event.keyCode == 13) {
            $("#tos_modal").modal();
          }
        });

        $("#reg").click(function() {
          register();
        });

        $("#tos").click(function() {
          $("#tos_modal").modal();
        });
      })</script>
    <script>var wait = 60;
      function time(o) {
        if (wait == 0) {
          o.removeAttr("disabled");
          o.text("获取验证码");
          wait = 60;
        } else {
          o.attr("disabled", "disabled");
          o.text("重新发送(" + wait + ")");
          wait--;
          setTimeout(function() {
            time(o)
          },
          1000)
        }
      }

      $(document).ready(function() {
        $("#email_verify").click(function() {
          time($("#email_verify"));

          $.ajax({
            type: "POST",
            url: "send",
            dataType: "json",
            data: {
              email: $("#email").val()
            },
            success: function(data) {
              if (data.ret) {
                $("#result").modal();
                $("#msg").html(data.msg);

              } else {
                $("#result").modal();
                $("#msg").html(data.msg);
              }
            },
            error: function(jqXHR) {
              $("#result").modal();
              $("#msg").html(data.msg + "     出现了一些错误。");
            }
          })
        })
      })</script>
    <script>function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
          var pair = vars[i].split("=");
          if (pair[0] == variable) {
            return pair[1];
          }
        }
        return "";
      }

      function setCookie(cname, cvalue, exdays) {
        var d = new Date();
        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
        var expires = "expires=" + d.toGMTString();
        document.cookie = cname + "=" + cvalue + "; " + expires;
      }

      function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
          var c = ca[i].trim();
          if (c.indexOf(name) == 0) return c.substring(name.length, c.length);
        }
        return "";
      }

      if (getQueryVariable('code') != '') {
        setCookie('code', getQueryVariable('code'), 30);
        window.location.href = '/auth/register';
      }</script>
  </body>

</html>